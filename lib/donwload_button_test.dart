import 'dart:io';
import 'dart:isolate';
import 'dart:ui';

import 'package:flutter/material.dart';
import 'package:flutter_downloader/flutter_downloader.dart';
import 'package:note/note/state/file-entry.dart';
import 'package:note/transfers/transfer-queue/transfer-queue.dart';
import 'package:path_provider/path_provider.dart';
import 'package:permission_handler/permission_handler.dart';
import 'note/dialogs/message-dialog.dart';
import 'package:provider/provider.dart';
import 'package:path/path.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/foundation.dart';



class DownLoadButton2 extends StatefulWidget {
  static const ROUTE="/";
  const DownLoadButton2({Key key}) : super(key: key);

  @override
  _DownLoadButtonState createState() => _DownLoadButtonState();
}

class _DownLoadButtonState extends State<DownLoadButton2> {
  int progress = 0;
  @override
  Widget build(BuildContext context) {
    return  Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Text(
            "${progress}",
            style: TextStyle(fontSize: 20),
          ),
          SizedBox(
            height: 20,
          ),
          Center(
            child: RaisedButton(
              onPressed: () async {
                final appName = "note";
                String destination;
                if (Platform.isAndroid) {
                  if (await Permission.storage.request().isGranted) {
                    destination = '/storage/emulated/0/Download';
                  } else {
                    showMessageDialog(context,
                        ('$appName needs storage permissions in order to download files. You can grant this permission from app settings.'));
                  }
                } else {
                  destination = (await getApplicationDocumentsDirectory()).path;
                }
                if (destination != null) {
                  final transfers = context.read<TransferQueue>();
                  FileEntry fileEntry = FileEntry(
                      url:
                          "https://firebasestorage.googleapis.com/v0/b/note-40b44.appspot.com/o/images%2F73204image_picker8768255562701321956.jpg?alt=media&token=86f2c920-4ee0-46b6-8c3f-eaeaf571b0a4",
                      //"data:image/jpeg;base64,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",
                      fileSize: 90664,
                      fileName: "222",
                      name: "image128");
                  transfers.addDownload(
                      fileEntry, '$destination/${fileEntry.name}');
                  print("test 1 passed");

                  //driveState.deselectAll();

                  // showSnackBar(
                  // trans('Queued :count items for download.', replacements: {'count': entries.length.toString()}),
                  // context,
                  // action: SnackBarAction(label: trans('View'), onPressed: () {
                  // rootNavigatorKey.currentState.pushNamed(TransfersScreen.ROUTE);
                  // }),
                  //
                  // );
                }
              },
              child: Text("download"),
            ),
          ),
        ],

    );
  }
}
